<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="1800" viewBox="0 0 1400 1800">
  <defs>
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L12,6 L0,12 z" fill="#570E19" />
    </marker>
    <style>
      text { font-family: Inter, Pretendard, system-ui, -apple-system, Segoe UI, Roboto, Arial; }
      .title { fill:#570E19; font-weight:800; }
    </style>
  </defs>
  <rect x="0" y="0" width="1400" height="1800" fill="#F6EFE9"/>
  <text x="700.0" y="54" text-anchor="middle" font-size="28" class="title">‘내 취향 찾기’ 사용자 및 데이터 흐름도</text>
  <text x="700.0" y="86" text-anchor="middle" font-size="16" fill="#5a4c48">사용자가 퀴즈를 시작해 결과를 받기까지의 UI 단계와 React 상태 변화를 요약</text>

    <g id="step1" class="step" transform="translate(130,120)">
      <rect rx="16" ry="16" x="0" y="0" width="1140" height="230" fill="white" stroke="#570E19" stroke-width="2"/>
      <text x="570.0" y="36" text-anchor="middle" font-size="22" font-weight="700" fill="#570E19">1. 시작 (메인 페이지)</text>
      <foreignObject x="18" y="56" width="1104" height="162">
        <body xmlns="http://www.w3.org/1999/xhtml">
          <div style="font-size:15px; color:#2B2220; line-height:1.45; font-family:Inter, Pretendard, system-ui, -apple-system, Segoe UI, Roboto, Arial;">
            <p><b>View</b>: &lt;MainPage /&gt; 렌더링</p>
<p><b>[App State]</b> <code>viewMode: 'main'</code></p>
<p><b>User Action</b>: <code>&lt;MyPickHero /&gt;</code>의 “내 취향 찾기” 버튼 클릭</p>
<p><b>State Change</b>: <code>setViewMode('quiz')</code></p>
<p><b>[App State]</b> <code>'main' → 'quiz'</code></p>
          </div>
        </body>
      </foreignObject>
    </g>
    
    <g id="step2" class="step" transform="translate(130,390)">
      <rect rx="16" ry="16" x="0" y="0" width="1140" height="320" fill="white" stroke="#570E19" stroke-width="2"/>
      <text x="570.0" y="36" text-anchor="middle" font-size="22" font-weight="700" fill="#570E19">2. 퀴즈 진행 (1/3 페이지)</text>
      <foreignObject x="18" y="56" width="1104" height="252">
        <body xmlns="http://www.w3.org/1999/xhtml">
          <div style="font-size:15px; color:#2B2220; line-height:1.45; font-family:Inter, Pretendard, system-ui, -apple-system, Segoe UI, Roboto, Arial;">
            <p><b>View</b>: &lt;MainSection /&gt;이 상태 변경을 감지 → &lt;TasteQuiz /&gt; 렌더링</p>
<p><b>[Quiz State]</b> <code>step: 1</code>, <code>localAnswers: { q1: null, q2: null, q3: null, ... }</code></p>
<ul>
  <li>Q1: “어떤 종류를 원하시나요?” → <code>'red'</code> 선택 → <code>setLocalAnswers({ ... , q1: 'red' })</code></li>
  <li>Q2: “어떤 지역의 와인이 좋을까요?” → <code>'europe'</code> 선택 → <code>setLocalAnswers({ ... , q2: 'europe' })</code></li>
</ul>
<p>둘 다 값이 있으면 “다음” 버튼 <b>enabled</b></p>
<p><b>User Action</b>: “다음” 클릭 → <b>State</b>: <code>setStep(2)</code> ( <code>step: 1 → 2</code> )</p>
          </div>
        </body>
      </foreignObject>
    </g>
    
    <g id="step3" class="step" transform="translate(130,750)">
      <rect rx="16" ry="16" x="0" y="0" width="1140" height="340" fill="white" stroke="#570E19" stroke-width="2"/>
      <text x="570.0" y="36" text-anchor="middle" font-size="22" font-weight="700" fill="#570E19">3. 퀴즈 진행 (2/3, 3/3 페이지)</text>
      <foreignObject x="18" y="56" width="1104" height="272">
        <body xmlns="http://www.w3.org/1999/xhtml">
          <div style="font-size:15px; color:#2B2220; line-height:1.45; font-family:Inter, Pretendard, system-ui, -apple-system, Segoe UI, Roboto, Arial;">
            <p><b>View</b>: &lt;TasteQuiz /&gt;가 step 변경을 감지하여 2/3, 3/3 질문 렌더링</p>
<p>사용자는 각 페이지의 질문에 응답 (로컬 상태 <code>localAnswers</code> 업데이트 반복)</p>
<p><b>User Action</b>: 3/3에서 “결과보기”(또는 마지막 “다음”) 클릭</p>
<p><b>Action</b> (in &lt;TasteQuiz /&gt;)</p>
<ul>
  <li><code>setQuizAnswers(localAnswers)</code> — 수집된 응답을 <b>App 전역 상태</b>로 올림 (Lifting State Up)</li>
  <li><code>setViewMode('results')</code> — 결과 뷰로 전환</li>
</ul>
<p><b>[App State]</b> <code>viewMode: 'quiz' → 'results'</code>, <code>quizAnswers: { q1: 'red', q2: 'europe', ... }</code></p>
          </div>
        </body>
      </foreignObject>
    </g>
    
    <g id="step4" class="step" transform="translate(130,1130)">
      <rect rx="16" ry="16" x="0" y="0" width="1140" height="300" fill="white" stroke="#570E19" stroke-width="2"/>
      <text x="570.0" y="36" text-anchor="middle" font-size="22" font-weight="700" fill="#570E19">4. 결과 페이지</text>
      <foreignObject x="18" y="56" width="1104" height="232">
        <body xmlns="http://www.w3.org/1999/xhtml">
          <div style="font-size:15px; color:#2B2220; line-height:1.45; font-family:Inter, Pretendard, system-ui, -apple-system, Segoe UI, Roboto, Arial;">
            <p><b>View</b>: &lt;MainSection /&gt;이 상태 변경을 감지 → &lt;QuizResults /&gt; 렌더링</p>
<p><b>Data Passing</b>: <code>&lt;QuizResults /&gt;</code>는 <code>answers={'{'}quizAnswers{'}'}</code> props를 전달받음</p>
<p><b>Action</b> (in &lt;QuizResults /&gt;): answers 기반으로 추천 리스트 필터링 or API 요청 → 결과 목록 렌더</p>
<p><b>UI</b>: “내 취향에 꼭 맞는 와인” 리스트 표시</p>
<p><b>User Action</b>: “첫페이지로 돌아가기” 클릭 → <code>setViewMode('main')</code></p>
<p><b>[App State]</b> <code>'results' → 'main'</code></p>
          </div>
        </body>
      </foreignObject>
    </g>
    
    <g id="step5" class="step" transform="translate(130,1470)">
      <rect rx="16" ry="16" x="0" y="0" width="1140" height="180" fill="white" stroke="#570E19" stroke-width="2"/>
      <text x="570.0" y="36" text-anchor="middle" font-size="22" font-weight="700" fill="#570E19">5. 흐름 종료</text>
      <foreignObject x="18" y="56" width="1104" height="112">
        <body xmlns="http://www.w3.org/1999/xhtml">
          <div style="font-size:15px; color:#2B2220; line-height:1.45; font-family:Inter, Pretendard, system-ui, -apple-system, Segoe UI, Roboto, Arial;">
            <p><b>View</b>: &lt;MainSection /&gt;이 상태 변경을 감지 → 다시 &lt;MainPage /&gt; 렌더링</p>
<p><b>[App State]</b> <code>viewMode: 'main'</code></p>
          </div>
        </body>
      </foreignObject>
    </g>
    <path d="M700.0,350 L700.0,380" fill="none" stroke="#570E19" stroke-width="2.2" marker-end="url(#arrow)"/><path d="M700.0,710 L700.0,740" fill="none" stroke="#570E19" stroke-width="2.2" marker-end="url(#arrow)"/><path d="M700.0,1090 L700.0,1120" fill="none" stroke="#570E19" stroke-width="2.2" marker-end="url(#arrow)"/><path d="M700.0,1430 L700.0,1460" fill="none" stroke="#570E19" stroke-width="2.2" marker-end="url(#arrow)"/></svg>